<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Getting Started</title>
    <script src="https://unpkg.com/vue@next"></script>
    <script src="https://unpkg.com/@fluent/bundle"></script>
    <script src="https://unpkg.com/vue-demi"></script>
    <script src="https://unpkg.com/fluent-vue@3.0.0-beta.16/dist/fluent-vue.global.js"></script>
    <script src="https://unpkg.com/marked@0.3.6"></script>
  </head>
  <body>
    <div id="app">
      <h1>{{ $t('f_title') }}</h1>

      <h2>{{ $t('message.t2') }}</h2>
      <div v-html="md( $t('message.t2body') )"></div>
    
      <h2>{{ $t('message.t3') }}</h2>
      <h3>{{ $t('message.t4') }}</h3>
      
      <form>
        <label for="locale-select">...</label>
        <select id="locale-select" name="submission_language" v-model="locale">
          <option value="en">English</option>
          <option value="es">Español (Spanish)</option>
          <option value="ja">日本語で (Japanese)</option>
        </select>
      </form>

      <div v-html="$t('f_submission_presentation_lang', { submission_language: 'English'})"></div>

    </div>    

    <script>
      const { createApp } = Vue,
        { FluentBundle, FluentResource } = window.FluentBundle,
        { createFluentVue } = FluentVue

      const app = createApp({
        setup() {
          return { md: marked }
        }
      })

      // Create bundles for locales that will be used
      const enBundle = new FluentBundle('en')
      const ukBundle = new FluentBundle('ja')

      // Add global resources to the bundles
      enBundle.addResource(new FluentResource(`
f_title = RustFest Global 2021 CFP`))

      enBundle.addResource(new FluentResource(`f_submission_presentation_lang =
  If you plan to present in { $submission_language } you can leave this field unmodified.
`))

      // Create plugin istance
      // bundles - The current negotiated fallback chain of languages
      const fluent = createFluentVue({
        bundles: [enBundle, ukBundle]
      })

      app.use(fluent)
      app.mount('#app')
    </script>
  </body>
</html>